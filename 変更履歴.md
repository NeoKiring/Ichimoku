# 変更履歴

## 概要
このファイルは、Ichimokuプロジェクト管理システムの変更履歴を記録します。
すべての重要な変更、追加、削除、修正について時系列で記載してください。

---

## [1.1.0] - 2026-01-14

### 変更 (Changed)

#### PyQt6からPySide6への移行完了
- **目的**: GUIフレームワークをPyQt6からPySide6に移行
- **理由**:
  - ライセンスの柔軟性（GPL → LGPL）
  - Qt Companyの公式サポート
  - コミュニティサポートの充実
- **影響範囲**:
  - GUIモジュール全体（14ファイル）
  - 約6,642行のコード
- **移行対象ファイル**:
  1. `project_manager/interface/gui/controller.py`
  2. `project_manager/interface/gui/main_window.py`
  3. `project_manager/interface/gui/app.py`
  4. `project_manager/interface/gui/utils.py`
  5. `project_manager/interface/gui/project_dialog.py`
  6. `project_manager/interface/gui/phase_dialog.py`
  7. `project_manager/interface/gui/process_dialog.py`
  8. `project_manager/interface/gui/task_dialog.py`
  9. `project_manager/interface/gui/excel_dialog.py`
  10. `project_manager/interface/gui/bulk_excel_dialog.py`
  11. `project_manager/interface/gui/gantt_chart_widget.py`
  12. `project_manager/interface/gui/gantt_chart_tab.py`
  13. `project_manager/interface/gui/error_log_tab.py`
  14. `project_manager/interface/gui/notification_tab.py`
- **実施した変更内容**:
  - ✅ インポート文の変更: `from PyQt6` → `from PySide6`（全14ファイル）
  - ✅ シグナル定義の変更: `pyqtSignal` → `Signal`（7箇所）
  - ✅ 動的インポートの変更: 5箇所の動的インポート文を更新
  - ✅ main.pyのエラーメッセージ更新
- **変更統計**:
  - 変更ファイル数: 15ファイル
  - インポート文の変更: 約30箇所
  - シグナル定義の変更: 7箇所
- **テスト状況**: 未実施（PySide6のインストールが必要）
- **移行不要モジュール**:
  - コアビジネスロジック（`core/`）- Pure Python
  - データモデル（`model/`）- Pure Python
  - CLIインターフェース（`interface/cli.py`）- Pure Python
  - データストレージ（`storage/`）- Pure Python
  - Excel処理（`excel/`）- openpyxl使用

### 修正 (Fixed)

#### run_project_manager.batのPyQt6チェックをPySide6に修正
- **問題**: run_project_manager.batがPyQt6のチェックとインストールを試みていたため、Windows環境でGUIモードを選択するとコンソールが落ちる問題が発生
- **原因**: バッチファイル内のPyQt6関連の記述が更新されていなかった
- **修正内容**:
  - ✅ PyQt6のインポートチェック → PySide6のインポートチェックに変更 (73行目)
  - ✅ PyQt6のインストール処理 → PySide6のインストール処理に変更 (76行目)
  - ✅ エラーメッセージ内の"PyQt6"を"PySide6"に変更 (7箇所)
- **影響**: Windows環境でrun_project_manager.batからGUIモードを正常に起動できるようになった
- **変更ファイル**: `run_project_manager.bat`

#### modelディレクトリをmodelsにリネーム
- **問題**: `ModuleNotFoundError: No module named 'project_manager.models'`が発生し、Windows環境でGUIモードが起動できない
- **原因**:
  - 実際のディレクトリ名：`project_manager/model/`（単数形）
  - インポート文：`from ..models import`（複数形）
  - ディレクトリ名とインポート文の不一致
- **修正内容**:
  - ✅ ディレクトリ名を`model/`から`models/`にリネーム
  - ✅ 7ファイルを移動（__init__.py, base.py, notification.py, phase.py, process.py, project.py, task.py）
- **影響**: すべてのインポート文が正常に動作し、GUIモードが起動できるようになった
- **変更ファイル**: `project_manager/model/` → `project_manager/models/`（ディレクトリ全体）

### 📄 ドキュメント作成・更新

#### 技術引継ぎ資料の作成
- **ファイル**: `技術引継ぎ資料_PyQt6からPySide6への移行.md`
- **作成日**: 2026-01-14
- **内容**:
  - システム概要
  - システムアーキテクチャ
  - ディレクトリ構成
  - 実装済み機能一覧（全機能を詳細に列挙）
  - データモデル詳細
  - GUI実装詳細
  - PyQt6からPySide6への移行情報
  - 主要クラスと責務
  - 外部依存関係
  - 注意点とベストプラクティス
- **目的**:
  - 後任プログラマがシステム全体を理解できるようにする
  - GUIの設計を行えるようにする
  - 移行作業を効率的に進められるようにする

---

## 今後の変更記録テンプレート

### [バージョン番号] - YYYY-MM-DD

#### 追加 (Added)
- 新機能の説明
  - 詳細な内容
  - 影響を受けるファイル
  - 関連するissue番号

#### 変更 (Changed)
- 既存機能の変更内容
  - 変更前の動作
  - 変更後の動作
  - 影響を受けるファイル

#### 非推奨 (Deprecated)
- 非推奨となった機能
  - 理由
  - 代替手段
  - 削除予定時期

#### 削除 (Removed)
- 削除された機能
  - 削除理由
  - 影響を受けるファイル

#### 修正 (Fixed)
- バグ修正の内容
  - 修正前の問題
  - 修正内容
  - 関連するissue番号

#### セキュリティ (Security)
- セキュリティ関連の変更
  - 脆弱性の説明
  - 修正内容

---

## 変更履歴の記入ガイドライン

### 記入ルール

1. **時系列順**: 最新の変更を上部に記載
2. **明確な説明**: 何を、なぜ、どのように変更したか
3. **ファイル名の記載**: 影響を受けるファイルを明記
4. **バージョン番号**: セマンティックバージョニングに従う（major.minor.patch）
5. **日付形式**: YYYY-MM-DD形式を使用

### カテゴリ定義

- **追加 (Added)**: 新機能の追加
- **変更 (Changed)**: 既存機能の変更
- **非推奨 (Deprecated)**: 将来削除予定の機能
- **削除 (Removed)**: 削除された機能
- **修正 (Fixed)**: バグ修正
- **セキュリティ (Security)**: セキュリティ関連の修正

### 記入例

```markdown
## [1.1.0] - 2026-01-20

### 追加 (Added)
- **PySide6への移行完了**
  - すべてのGUIコンポーネントをPySide6に移行
  - 影響ファイル: `interface/gui/`配下の全14ファイル
  - テスト完了: 全機能の動作確認済み
  - 関連issue: #123

### 変更 (Changed)
- **依存パッケージの更新**
  - PyQt6をアンインストール
  - PySide6>=6.0.0を追加
  - requirements.txtを更新

### 削除 (Removed)
- **PyQt6関連コード**
  - すべてのPyQt6インポート文を削除
  - pyqtSignalをSignalに変更

### 修正 (Fixed)
- **ガントチャートの描画バグ修正**
  - PySide6移行時の描画エラーを修正
  - 影響ファイル: `gantt_chart_widget.py`
```

---

## システム情報

### 現在のバージョン
- **バージョン**: 1.0.0（PyQt6ベース）
- **次期バージョン**: 1.1.0（PySide6ベース、予定）

### 技術スタック

#### 現在（v1.0.0）
- Python 3.8+
- PyQt6
- openpyxl 3.x
- JSONファイルベースのデータ永続化

#### 予定（v1.1.0）
- Python 3.8+
- **PySide6**（変更）
- openpyxl 3.x
- JSONファイルベースのデータ永続化

---

## 連絡先・参考情報

### 開発チーム
- **プロジェクトリーダー**: （記入してください）
- **技術リード**: （記入してください）
- **開発メンバー**: （記入してください）

### 参考リンク
- **Githubリポジトリ**: （記入してください）
- **プロジェクト管理ツール**: （記入してください）
- **ドキュメント**: `技術引継ぎ資料_PyQt6からPySide6への移行.md`

---

## 注意事項

1. **変更を加えたら必ず記録**: どんな小さな変更でも記録してください
2. **明確な説明**: 他の開発者が理解できるように書いてください
3. **定期的なレビュー**: 月次でこのファイルをレビューし、不要な情報を整理してください
4. **バックアップ**: 重要な変更の前にGitコミットしてください

---

**最終更新**: 2026-01-14
**更新者**: システム移行チーム
