# Ichimoku - プロジェクト管理システム

プロジェクト、フェーズ、プロセス、タスクの4階層構造で管理する総合プロジェクト管理システムです。

## 概要

Ichimokuは、複雑なプロジェクトを体系的に管理するためのデスクトップアプリケーションです。
直感的なGUIインターフェースとCLIモードの両方を提供し、プロジェクトの進捗管理、タスク追跡、
工数管理、ガントチャート表示、Excel連携など、プロジェクト管理に必要な機能を包括的にサポートします。

## 主な機能

### 🎯 階層的プロジェクト管理
- **4階層構造**: プロジェクト → フェーズ → プロセス → タスク
- **柔軟な進捗管理**: 未着手、進行中、完了、中止、保留、対応不能の6種類のステータス
- **自動進捗計算**: 下位階層の進捗率から上位階層の進捗を自動計算

### 📊 可視化機能
- **ガントチャート**: プロジェクト全体のスケジュールを視覚的に表示
  - ドラッグ&ドロップでのスケジュール調整
  - ズーム機能（日次/週次/月次表示）
  - 依存関係の表示
- **進捗ダッシュボード**: リアルタイムで進捗状況を確認
- **ツリービュー**: 階層構造を一目で把握

### 📝 タスク管理
- **詳細なタスク情報**: 説明、担当者、開始日、期日、工数、優先度
- **タスク検索・フィルタリング**: ステータス、担当者、期日で絞り込み
- **バルク操作**: 複数タスクの一括更新

### 📈 Excel連携
- **Excelエクスポート**: プロジェクト全体をExcelファイルに出力
- **Excelインポート**: Excelファイルからプロジェクトデータを一括取り込み
- **テンプレート対応**: カスタマイズ可能なExcelテンプレート

### 🔔 通知・エラー管理
- **通知システム**: 期日接近、タスク完了などのイベントを通知
- **エラーログ**: システムエラーを記録・表示
- **エラーフィルタリング**: 日付、重要度でエラーログを絞り込み

### 💾 データ管理
- **JSONベース**: 軽量で可搬性の高いJSONファイル形式
- **自動保存**: データ変更時に自動的に保存
- **バックアップ**: データディレクトリ全体を簡単にバックアップ可能

## 技術スタック

### バージョン 1.1.0（現行版）
- **Python**: 3.8以上
- **GUIフレームワーク**: PySide6（Qt for Python）
- **Excel処理**: openpyxl 3.x
- **データ永続化**: JSON形式
- **アーキテクチャ**: MVC（Model-View-Controller）パターン

### 移行履歴
- **v1.0.0**: PyQt6ベース（旧版）
- **v1.1.0**: PySide6に完全移行（2026-01-14）
  - ライセンス変更: GPL → LGPL
  - Qt Companyの公式サポート
  - 詳細は `変更履歴.md` を参照

## システム要件

### 必須要件
- Python 3.8以上
- Windows 10以上（.batファイル使用時）
- または Linux/macOS（Python直接実行）

### 推奨環境
- メモリ: 4GB以上
- ディスプレイ解像度: 1920x1080以上

## インストール

### 1. リポジトリのクローン
```bash
git clone <repository-url>
cd Ichimoku
```

### 2. 依存パッケージのインストール
```bash
pip install PySide6 openpyxl
```

または、requirements.txtがある場合:
```bash
pip install -r requirements.txt
```

## 使い方

### Windows環境での起動（推奨）

`run_project_manager.bat` をダブルクリックして起動します。

起動メニューから選択:
- **[1] GUIモード**: グラフィカルインターフェースで起動
- **[2] CLIモード**: コマンドラインインターフェースで起動
- **[3] 設定の変更**: データディレクトリ、ログディレクトリの設定
- **[4] 終了**: アプリケーションを終了

#### 初回起動時の注意
- PySide6が自動的にインストールされます（インストールされていない場合）
- `data/` ディレクトリと `logs/` ディレクトリが自動作成されます

### Python直接実行

#### GUIモードで起動
```bash
python project_manager/main.py --gui
```

#### CLIモードで起動
```bash
python project_manager/main.py
```

#### オプション
```bash
python project_manager/main.py --help

オプション:
  --data-dir DIR  データを保存するディレクトリ（デフォルト: data）
  --log-dir DIR   ログを保存するディレクトリ（デフォルト: logs）
  --gui           GUIモードで起動
```

## プロジェクト構造

```
Ichimoku/
├── project_manager/          # メインパッケージ
│   ├── main.py               # エントリーポイント
│   ├── core/                 # コアビジネスロジック
│   │   ├── manager.py        # プロジェクトマネージャー
│   │   ├── logger.py         # ロガー
│   │   ├── error_handler.py  # エラーハンドラー
│   │   └── notification_manager.py  # 通知マネージャー
│   ├── models/               # データモデル
│   │   ├── project.py        # プロジェクトモデル
│   │   ├── phase.py          # フェーズモデル
│   │   ├── process.py        # プロセスモデル
│   │   ├── task.py           # タスクモデル
│   │   └── notification.py   # 通知モデル
│   ├── interface/            # ユーザーインターフェース
│   │   ├── cli.py            # CLIインターフェース
│   │   └── gui/              # GUIコンポーネント（14ファイル、約6,642行）
│   │       ├── app.py        # GUIアプリケーション
│   │       ├── main_window.py     # メインウィンドウ
│   │       ├── controller.py      # GUIコントローラー
│   │       ├── utils.py           # GUI共通ユーティリティ
│   │       ├── *_dialog.py        # 各種ダイアログ（6ファイル）
│   │       └── *_tab.py           # 各種タブ（3ファイル）
│   ├── storage/              # データ永続化
│   │   └── data_store.py     # JSONストレージ
│   └── excel/                # Excel連携
│       ├── exporter.py       # Excelエクスポート
│       └── importer.py       # Excelインポート
├── data/                     # プロジェクトデータ（自動作成）
├── logs/                     # ログファイル（自動作成）
├── run_project_manager.bat   # Windows起動スクリプト
├── 変更履歴.md               # 変更履歴
├── 技術引継ぎ資料_PyQt6からPySide6への移行.md  # 技術ドキュメント
└── README.md                 # このファイル
```

## アーキテクチャ

### MVC（Model-View-Controller）パターン

- **Model** (`models/`): データ構造とビジネスロジック
  - プロジェクト、フェーズ、プロセス、タスクの各モデル
  - データバリデーション、進捗計算ロジック

- **View** (`interface/gui/`): ユーザーインターフェース
  - PySide6ベースのGUIコンポーネント
  - メインウィンドウ、ダイアログ、カスタムウィジェット

- **Controller** (`core/manager.py`, `interface/gui/controller.py`):
  - ビジネスロジックとUIの橋渡し
  - データの CRUD 操作
  - シグナル/スロットによるイベント駆動

### データフロー

1. **ユーザー操作** → GUI（View）
2. **GUIイベント** → Controller（シグナル/スロット）
3. **ビジネスロジック実行** → Manager（Core）
4. **データ更新** → Model
5. **データ永続化** → Storage（JSON）
6. **画面更新** → GUI（View）に反映

## 開発情報

### 詳細なドキュメント

プロジェクトの詳細な技術情報は以下のドキュメントを参照してください:

- **[技術引継ぎ資料_PyQt6からPySide6への移行.md](技術引継ぎ資料_PyQt6からPySide6への移行.md)**
  - システム全体の詳細仕様
  - 全機能の実装詳細
  - データモデル設計
  - GUI実装ガイド
  - PyQt6からPySide6への移行ガイド

- **[変更履歴.md](変更履歴.md)**
  - バージョン履歴
  - 主要な変更内容
  - バグ修正履歴

### コーディング規約

- **スタイル**: PEP 8準拠
- **ドキュメント**: Docstring形式（Google Style）
- **エンコーディング**: UTF-8
- **インデント**: 4スペース

## トラブルシューティング

### PySide6が見つからないエラー

```bash
pip install PySide6
```

Windows環境で `.bat` ファイルを使用している場合は、自動的にインストールされます。

### ModuleNotFoundErrorが発生する

プロジェクトのルートディレクトリで実行していることを確認してください:

```bash
cd /path/to/Ichimoku
python project_manager/main.py --gui
```

### GUIが文字化けする（Windows）

`run_project_manager.bat` の先頭で `chcp 932` が実行されているか確認してください。
これにより日本語（Shift-JIS）が正しく表示されます。

### データが保存されない

- `data/` ディレクトリへの書き込み権限があることを確認
- ディスクの空き容量を確認
- `logs/` ディレクトリのエラーログを確認

## ライセンス

このプロジェクトは以下のライブラリを使用しています:

- **PySide6**: LGPL（GNU Lesser General Public License）
- **openpyxl**: MIT License

プロジェクト本体のライセンスについては、ライセンスファイルを参照してください。

## 貢献

バグ報告や機能要望は、Issueを作成してください。
プルリクエストも歓迎します。

## サポート

質問や問題がある場合は、以下を確認してください:

1. このREADME.md
2. 技術引継ぎ資料_PyQt6からPySide6への移行.md
3. 変更履歴.md
4. `logs/` ディレクトリのログファイル

---

**最終更新**: 2026-01-15
**バージョン**: 1.1.0（PySide6ベース）
